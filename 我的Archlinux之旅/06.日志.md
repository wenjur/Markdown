# 日志

安装完archlinux后会碰到各种各样的问题，做个记录。

**Q1：在已经enable的情况下，蓝牙服务开机未自启；连接手机设备时，报错连接失败，但实际上可以传输文件。**

**Q2：电脑自动锁屏时，屏幕会闪烁一下--先变暗，再变亮；并且输入密码登录进入桌面的那一刻，也会闪烁。**

**Q3：电脑锁屏后，此时屏幕亮着，经过较长时间（大概5-10分钟），会死机，同时风扇开始旋转，噪声较大。**

**Q4：电脑的语系安装时设置的是en_US.UTF-8，但是在某次-Syu更新后，语系被设置成了zh_CN.UTF-8。此时电脑环境变为简体中文显示。**

**Q5：双系统的时间总是差8小时。只要在arch下同步了时间，回到windows就慢8小时。**

> **参考**：[System time - ArchWiki](https://wiki.archlinux.org/title/System_time)
>
> **为什么？**：
>
> （1）先查询四个概念：系统时间（system clock），硬件时间（hardware clock），UTC时间标准，localtime时间标准。
>
> （2）大多数操作系统开机时读取硬件时间，并设置系统时间（桌面显示的时间）；关机时将系统时间写入硬件时间。
>
> （3）对于windows和archlinux来说，开机时二者设置系统时间行为有差异：首先二者共用同一硬件时间；windows将硬件时间直接设置为系统时间，遵循localtime标准；archlinux则是将硬件时间当作UTC时间，然后根据时区设置加上时间漂移（上海就是8小时）再设置为系统时间。
>
> （4）假设现在12：00，从windows重启进入archlinux：不联网的情况下，根据（1）（2）（3）分析得知，时间会快8小时即20：00，再次重启进入windows，显示时间正常。联网的情况下，时间正常，再次重启进入windows，显示时间则会慢8小时即4：00。
>
> **解决方案**：
>
> 让archlinux使用localtime时间标准，或者让windows使用UTC时间标准，推荐后者。
>
> 具体操作为：以管理员身份打开cmd，输入命令：`reg add "HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\TimeZoneInformation" /v RealTimeIsUniversal /d 1 /t REG_DWORD /f`。此操作修改注册表，添加名为RealTimeIsUniversal的新值--十六进制1。

